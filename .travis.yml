language: python
python: 2.7
services:
    - postgresql
cache: pip
install:
    - pip install -e git+https://github.com/aiidateam/aiida-wannier90#egg=aiida-wannier90
    - pip install -e git+https://github.com/greschd/aiida_pytest#egg=aiida_pytest
    - pip install -e git+https://github.com/DropD/aiida_core@plugin-fixtures#egg=aiida-core
    - pip install -e .[regen_default_paws,graphs,dev]
    - pip install --upgrade enum34
env:
    - TEST_TYPE="pre-commit"
    - TEST_TYPE="unittests"
script: "./run_ci_tests.sh"
#jobs:
#    include:
#        - stage: compliance
#          script: pre-commit run --all-files
#        - stage: test
#          script: coverage run pytest --ignore=test --ignore=tests_pytest && coverage report
